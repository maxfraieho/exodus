---
{"title":"T–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç —ñ–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö MS SQL —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ docker","dg-publish":true,"dg-metatags":null,"dg-home":null,"permalink":"/ukrayinskoyu/telegram-bot-iz-pidklyuchennyam-do-bazi-danih-ms-sql-u-kontejneri-docker/","dgPassFrontmatter":true,"noteIcon":""}
---


[Microsoft SQL Server\*](/ru/hubs/mssql/)  
[Python\*](/ru/hubs/python/)  
[ERP-—Å–∏—Å—Ç–µ–º–∏\*](/ru/hubs/erp/)  

**–¢—É—Ç–æ—Ä—ñ–∞–ª**  

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ec1/6c2/c21/ec16c2c2148c5f435eafb8543364d5d3.png)

---

## –î–ª—è –∫–æ–≥–æ —Ü—è —Å—Ç–∞—Ç—Ç—è

–°—Ç–∞—Ç—Ç—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –∑–∞–º–∏—Å–ª—é—î—Ç—å—Å—è –ø—Ä–æ —Ü–∏—Ñ—Ä–æ–≤—ñ–∑–∞—Ü—ñ—é –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤. –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç ‚Äî —á—É–¥–æ–≤–∏–π —Å–ø–æ—Å—ñ–± –Ω–∞–¥–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º—ñ–∂ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —Ç–∞ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–æ–º, —É —è–∫–æ–≥–æ –Ω–µ–º–∞—î –≤ —Ü–µ–π –º–æ–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ—ó –º–µ—Ä–µ–∂—ñ (–¥–æ —Å–≤–æ–≥–æ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä–∞). –ó–≤—ñ—Å–Ω–æ, –º–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ —Ä–æ–∑–≤‚Äô—è–∑—É—î —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è –∫—Ä–∞—â–µ, –ø—Ä–æ—Ç–µ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –Ω–µ–ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ –¢–ì-–±–æ—Ç–∞ (–Ω–∞–≤—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—å–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ). –¢–µ —Å–∞–º–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è —ñ —á–∞—Å—É –Ω–∞ —Ä–æ–∑—Ä–æ–±–∫—É/–≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è. –°–ø–æ–¥—ñ–≤–∞—é—Å—è, –¥–∞–Ω–∞ —Å—Ç–∞—Ç—Ç—è –±—É–¥–µ –∫–æ—Ä–∏—Å–Ω–æ—é –¥–ª—è –µ–Ω—Ç—É–∑—ñ–∞—Å—Ç—ñ–≤ –º–∞—Å—à—Ç–∞–±–Ω–æ–≥–æ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –¢–ì-–±–æ—Ç—ñ–≤ —è–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ü–∏—Ñ—Ä–æ–≤—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–º–∏—Å–ª–æ–≤–∏—Ö (—ñ –Ω–µ –ª–∏—à–µ) –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤.

---

## –õ–µ–≥–µ–Ω–¥–∞

–ü—Ä–∏–ø—É—Å—Ç—ñ–º–æ, –º–∏ –ø–µ—Ä–µ–±—É–≤–∞—î–º–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–∞, –º–∞—î–º–æ –≤–∏—Ö—ñ–¥ –≤ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç, –∞–ª–µ –∑–æ–≤–Ω—ñ –Ω–µ–º–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤. –Ñ –æ–±–ª—ñ–∫–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö MS SQL; –¥–æ –Ω–µ—ó –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ–≤—ñ–ª—å–Ω–æ–º—É –∫–ª—ñ—î–Ω—Ç—É —Ç–∞ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –≤ –º–µ–∂–∞—Ö –ø—Ä–∞–≤, –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö –¥–ª—è —Ü—å–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞. –ù–∞—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî –¥–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–æ–±—ñ—Ç–Ω–∏–∫–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ –ø–æ–ª–æ–º–∫—É –≤–µ—Ä—Å—Ç–∞—Ç–∞ —á–µ—Ä–µ–∑ –¢–ì-–±–æ—Ç (–∞–¥–∂–µ –≤ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ –Ω–µ–º–∞—î –ª–æ–≥—ñ–Ω–∞ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É –º–µ—Ä–µ–∂—É –π –Ω–µ–º–∞—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –æ–±–ª—ñ–∫–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏).

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

–ë–æ—Ç–∞ —Ä–æ–∑—Ä–æ–±–ª—è—Ç–∏–º–µ–º–æ –Ω–∞ Python –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ **aiogram3**, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —Å–µ—Ä—ñ—ó –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö —Å—Ç–∞—Ç–µ–π [@yakvenalex](/users/yakvenalex), –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, <https://habr.com/ru/companies/amvera/articles/820527/>.

–Ø–∫—â–æ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Ü–∏—Ñ—Ä–æ–≤—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏–∂–∏–≤–µ—Ç—å—Å—è, –±–æ—Ç—ñ–≤ –±—É–¥–µ –±–∞–≥–∞—Ç–æ. –©–æ–± —è–∫–æ—Å—å –∫–µ—Ä—É–≤–∞—Ç–∏ —Ü–∏–º —Ç–∞ –æ—Ä—ñ—î–Ω—Ç—É–≤–∞—Ç–∏—Å—è —É —Å–µ—Ä–≤—ñ—Å–∞—Ö, –≤—ñ–¥—Ä–∞–∑—É –ø—Ä–æ—î–∫—Ç—É—î–º–æ —ó—Ö —É –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω—ñ–π –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—ñ ‚Äî –ø–∞–∫—É—î–º–æ –≤ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ –∑–∞–ø—É—Å–∫–∞—Ç–∏–º–µ–º–æ —Å–∞–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ MS SQL Server —Ç–∞–∫–æ–∂ –∑–∞–ø—É—Å—Ç–∏–º–æ –≤ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, –∑–≥—ñ–¥–Ω–æ –∑ <https://hub.docker.com/r/microsoft/mssql-server>. –¶–µ –ø—Ä–æ—Å—Ç–æ –µ–º—É–ª—é—î –Ω–∞—è–≤–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö –æ–±–ª—ñ–∫–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏, –¥–µ—Ç–∞–ª—å–Ω–æ –Ω–∞ —Ü—å–æ–º—É –Ω–µ –∑—É–ø–∏–Ω—è—Ç–∏–º–µ–º–æ—Å—å, –∞–ª–µ –ø–æ–≥–æ–≤–æ—Ä–∏–º–æ –ø—Ä–æ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É.

---

## –°—Ö–µ–º–∞ —Ä–æ–±–æ—Ç–∏

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/3d0/687/816/3d0687816347146674699c4a129546db.png "–†–∏—Å. 1 ‚Äì –°—Ö–µ–º–∞ —Ä–æ–±–æ—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É")

**–†–∏—Å. 1 ‚Äî –°—Ö–µ–º–∞ —Ä–æ–±–æ—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É**

–î–≤–∞ —Å–ª–æ–≤–∞ –ø—Ä–æ —à–∞—Ä –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä, –∑–∞ –ø–æ—Å–µ—Ä–µ–¥–Ω–∏—Ü—Ç–≤–æ–º —è–∫–∏—Ö –±–æ—Ç –±—É–¥–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –π –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤ —Ç–∞–±–ª–∏—Ü—ñ. –í—ñ–Ω –ø–æ—Ç—Ä—ñ–±–Ω–∏–π:

1. –Ø–∫ —Ä—ñ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó (—â–æ–± –Ω–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞–±–ª–∏—Ü—å —ñ –º–∞—Ç–∏ –∑–º–æ–≥—É –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏ –º—ñ–Ω—è—Ç–∏ –∫–æ–¥ –±–æ—Ç–∞).
2. –©–æ–± –æ–±–º–µ–∂–∏—Ç–∏ –ø—Ä–∞–≤–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø—ñ–¥ —è–∫–∏–º –±–æ—Ç –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –≤ —Ä–æ–±–æ—á—ñ–π –±–∞–∑—ñ –¥–∞–Ω–∏—Ö (—Ç–æ–¥—ñ –Ω–∞–≤—ñ—Ç—å –∑–∞ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞ –±–æ—Ç –Ω–µ –∑–º–æ–∂–µ –ø—Å—É–≤–∞—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω—ñ –¥–∞–Ω—ñ –≤ –±–∞–∑—ñ).

---

## –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ MS SQL ‚Äî –µ–º—É–ª—å–æ–≤–∞–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—á–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑ SQL Server

```bash
docker run -e 'ACCEPT_EULA=Y' -e 'MSSQL_SA_PASSWORD=<password>' \
-p 1433:1433 \
--name mssql-server \
-v sqlvolume:/var/opt/mssql \
-d mcr.microsoft.com/mssql/server:2022-latest
````

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ö–µ–º–∏ –¥–∞–Ω–∏—Ö

–î–∞–ª—ñ, –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é SSMS (–∞–±–æ —ñ–Ω—à–æ–≥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞) –ø—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º **sa** —ñ –≤–∏–∫–æ–Ω—É—î–º–æ —Ç–∞–∫–∏–π —Å–∫—Ä–∏–ø—Ç:

```sql
-- –°—Ç–∞—Ä—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç
create database testdb; -- –¢–µ—Å—Ç–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
go;
use testdb;

-- –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–∞–±–ª–∏—Ü—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞ (—É –≤–∏—Ä–æ–±–Ω–∏—á—ñ–π –±–∞–∑—ñ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏)
create table bot_user_type( -- —Ç–∏–ø–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
    id int identity primary key, -- –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á
    user_type varchar(32)        -- —Ç–∏–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
);
insert into bot_user_type(user_type)
values (N'–†–æ–±–æ—á–∏–π'), (N'–ú–µ—Ö–∞–Ω—ñ–∫'), (N'–ï–ª–µ–∫—Ç—Ä–∏–∫'), (N'–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä');

create table bot_user(          -- –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±–æ—Ç–∞
    id int identity primary key, -- –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á
    user_name varchar(128),      -- —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –¢–ì
    tg_id bigint,                -- ID —É Telegram
    f_bot_user_type int foreign key references bot_user_type(id) -- —Ç–∏–ø –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
);
insert into bot_user(user_name, f_bot_user_type) -- —Ñ–µ–π–∫–æ–≤—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
values(N'–ü–µ—Ç—Ä–æ –Ü–≤–∞–Ω–æ–≤', 2), (N'–í–∞—Å–∏–ª—å –ö—É–∑—Ü–æ–≤', 3);

create table issue(                       -- –ü–æ–ª–æ–º–∫–∏ (—ñ–Ω—Ü–∏–¥–µ–Ω—Ç–∏)
    id int identity primary key,         -- –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á
    f_bot_user int foreign key references bot_user(id), -- –•—Ç–æ –ø–æ–¥–∞–≤ –∑–∞—è–≤–∫—É
    created smalldatetime,               -- –î–∞—Ç–∞ —ñ —á–∞—Å –ø–æ–¥–∞–Ω–Ω—è
    f_bot_user_type int foreign key references bot_user_type(id),  -- 1 - –ø–æ—Ç—Ä—ñ–±–µ–Ω –º–µ—Ö–∞–Ω—ñ–∫, 2 - –µ–ª–µ–∫—Ç—Ä–∏–∫
    f_bot_user_resp int foreign key references bot_user(id),       -- –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å
    closed smalldatetime                 -- –¥–∞—Ç–∞ —ñ —á–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è
);
go;
create schema bot; -- —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ —Å—Ö–µ–º–∞, –¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º—É—Ç—å—Å—è –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏
go;

create login tgbot with password = '<VeryStrongPassword>'; -- –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –ø—ñ–¥ —è–∫–∏–º –±–æ—Ç –≤—Ö–æ–¥–∏—Ç–∏–º–µ
create user tgbot for login tgbot;
go;
grant execute on schema ::bot to tgbot; 
-- –î–æ–∑–≤–æ–ª—è—î–º–æ –∑–∞–ø—É—Å–∫ –±—É–¥—å-—è–∫–∏—Ö –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä —É —Å—Ö–µ–º—ñ bot,
-- —Ä–µ—à—Ç–∏ –ø—Ä–∞–≤ –Ω–µ –¥–∞—î–º–æ!
go;
```

–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ ‚Äî —Å—Ç–≤–æ—Ä–∏—Ç–∏ —à–∞—Ä –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä, –¥–æ —è–∫–∏—Ö –∑–≤–µ—Ä—Ç–∞—Ç–∏–º–µ—Ç—å—Å—è –±–æ—Ç –¥–ª—è –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏–º–∏. –í—ñ–Ω –º—ñ—Å—Ç–∏—Ç–∏–º–µ —Ç—Ä–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏:

1. **bot.get_or_create_user** ‚Äî –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º–µ—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –π –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö.
2. **bot.create_issue** ‚Äî —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏–º–µ –Ω–æ–≤—É –ø–æ–ª–æ–º–∫—É –∞–±–æ —ñ–º—ñ—Ç—É–≤–∞—Ç–∏–º–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–≤—Ü—è (—è–∫—â–æ –≤–∏–∫–ª–∏–∫ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π).
3. **bot.close_all_issues** ‚Äî –∑–∞–∫—Ä–∏–≤–∞—Ç–∏–º–µ –≤—Å—ñ –≤—ñ–¥–∫—Ä–∏—Ç—ñ –ø–æ–ª–æ–º–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –π –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–∫—Ä–∏—Ç–∏—Ö —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—ñ–≤.

```sql
-- –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¢–ì
create procedure bot.get_or_create_user 
    @user_tg_id bigint,         -- –ÜD –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¢–ì
    @user_name varchar(128)     -- —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¢–ì
as
begin
    set nocount on;
    if not exists(select 1 from bot_user where tg_id = @user_tg_id)
        insert into bot_user(tg_id, user_name, f_bot_user_type)
        values (@user_tg_id, @user_name, 1); 
        -- –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏–∑–Ω–∞—á–∞—î–º–æ —Ä–æ–ª—å "–†–æ–±–æ—á–∏–π"

    select bu.id, bu.tg_id, bu.user_name, ut.user_type
    from bot_user bu
    join dbo.bot_user_type ut on ut.id = bu.f_bot_user_type
    where bu.tg_id = @user_tg_id;
end;
go;

-- –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π —ñ–Ω—Ü–∏–¥–µ–Ω—Ç. –Ø–∫—â–æ –≤–∂–µ —ñ—Å–Ω—É—î –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —ñ–Ω—Ü–∏–¥–µ–Ω—Ç —Ü—å–æ–≥–æ —Ç–∏–ø—É —É —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –Ω–µ –¥—É–±–ª—é—î–º–æ
create procedure bot.create_issue 
    @user_tg_id bigint, -- –ÜD –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¢–ì
    @issue_type int     -- —Ç–∏–ø –ø–æ–ª–æ–º–∫–∏ (2 –∞–±–æ 3)
as
begin
    set nocount on;
    if @issue_type not in (2, 3)
        throw 50011, N'–ù–µ–≤—ñ–¥–æ–º–∏–π —Ç–∏–ø –ø–æ–ª–æ–º–∫–∏', 1;

    declare @last_issue int;
    select top 1 @last_issue = i.id
    from issue i
    join dbo.bot_user b on i.f_bot_user = b.id
    where b.tg_id = @user_tg_id
      and i.f_bot_user_type = @issue_type
      and closed is null
    order by i.id desc;

    if @@rowcount = 0 
    begin
        insert into issue(f_bot_user, created, f_bot_user_type)
        select u.id, getdate(), @issue_type
        from bot_user u
        where u.tg_id = @user_tg_id;
        set @last_issue = scope_identity();
    end
    else
    begin
        -- –Ü–º—ñ—Ç—É—î–º–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–≤—Ü—è, —è–∫—â–æ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç —É–∂–µ —ñ—Å–Ω—É—î
        update issue
        set f_bot_user_resp = (
            select top 1 id
            from bot_user
            where bot_user.f_bot_user_type = @issue_type
            order by id desc
        )
        where id = @last_issue;
    end;

    select i.id, i.created, bu.user_name, but.user_type,
           coalesce(resp.user_name, N'–ù–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–æ') as responsible
    from issue i
    join dbo.bot_user bu on i.f_bot_user = bu.id
    join dbo.bot_user_type but on i.f_bot_user_type = but.id
    left join dbo.bot_user resp on resp.id = i.f_bot_user_resp
    where i.id = @last_issue;
end;
go;

-- –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—Å—ñ –≤—ñ–¥–∫—Ä–∏—Ç—ñ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç–∏ (–ø–æ–ª–æ–º–∫–∏) –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
create procedure bot.close_all_issues
    @user_tg_id bigint
as
begin
    set nocount on;
    update i
    set i.closed = getdate()
    from issue i
    join dbo.bot_user bu on i.f_bot_user = bu.id
    where bu.tg_id = @user_tg_id 
      and i.closed is null;

    select @@rowcount; 
    -- –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–∫—Ä–∏—Ç–∏—Ö –ø–æ–ª–æ–º–æ–∫
end;
go;
```

---

## –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç

–ú–µ—Ç–∞ —Å—Ç–∞—Ç—Ç—ñ ‚Äî –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ —Ä–æ–±–æ—á—É –∑–≤‚Äô—è–∑–∫—É –±–æ—Ç–∞ —ñ MS SQL Server, —Ç–æ–º—É –±–æ—Ç –±—É–¥–µ –¥–æ—Å–∏—Ç—å –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–º. –ó–∞–≤–¥–∞–Ω–Ω—è –±–æ—Ç–∞:

- –ü–æ –∫–æ–º–∞–Ω–¥—ñ **/start** –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É –ë–î.
- –ü–æ –∫–æ–º–∞–Ω–¥—ñ **/issue** –∑–∞–ø–∏—Ç–∞—Ç–∏, —á–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –º–µ—Ö–∞–Ω—ñ–∫ —á–∏ –µ–ª–µ–∫—Ç—Ä–∏–∫, —ñ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç. –Ø–∫—â–æ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç —É–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —ñ–∑ —Ç–∞–∫–æ—é –∂ –ø—Ä–∏—á–∏–Ω–æ—é, —ñ–º—ñ—Ç—É–≤–∞—Ç–∏ ¬´–ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è¬ª –≤–∏–∫–æ–Ω–∞–≤—Ü—è.
- –ü–æ –∫–æ–º–∞–Ω–¥—ñ **/close** –∑–∞–∫—Ä–∏—Ç–∏ –≤—Å—ñ –≤—ñ–¥–∫—Ä–∏—Ç—ñ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç–∏ —Ü—å–æ–≥–æ —ñ–Ω—ñ—Ü—ñ–∞—Ç–æ—Ä–∞.

–°—Ç–≤–æ—Ä—é—î–º–æ –±–æ—Ç–∞ —ñ –æ—Ç—Ä–∏–º—É—î–º–æ —Ç–æ–∫–µ–Ω (—è–∫ –æ–ø–∏—Å–∞–Ω–æ —É —Å—Ç–∞—Ç—Ç—è—Ö –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –≤–∏—â–µ).

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Å–∫–ª–∞–≤ –∫–æ–¥ –ø—Ä–æ—î–∫—Ç—É –≤—Å—å–æ–≥–æ —É –¥–≤–∞ —Ñ–∞–π–ª–∏. –ü–µ—Ä—à–∏–π ‚Äî `bot.py` (–≤—Å–µ, —â–æ –ø–æ–≤‚Äô—è–∑–∞–Ω–æ –∑ –±–æ—Ç–æ–º):

```python
# bot.py
import asyncio
import logging
from re import Match
import os

from aiogram import Bot, F, Dispatcher, Router
from aiogram.client.default import DefaultBotProperties
from aiogram.enums import ParseMode
from aiogram.filters import Command
from aiogram.fsm.storage.memory import MemoryStorage
from aiogram.types import CallbackQuery, InlineKeyboardButton, InlineKeyboardMarkup, Message
from aiogram.types.bot_command import BotCommand
from dotenv import load_dotenv

from db import DbConn

LOG = logging.getLogger(__name__)

# –ß–∏—Ç–∞—î–º–æ .env —É –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
dotenv_path = os.path.join(os.path.dirname(__file__), '.env')
load_dotenv(dotenv_path)

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
BOT_TOKEN = os.getenv("BOT_TOKEN")
SERVICE_CHAT_ID = os.getenv("SERVICE_CHAT_ID")

# –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±‚Äô—î–∫—Ç–∏ –±–æ—Ç–∞
bot = Bot(token=BOT_TOKEN, default=DefaultBotProperties(parse_mode=ParseMode.HTML))
dp = Dispatcher(storage=MemoryStorage())
router = Router()

# –û–Ω–ª–∞–π–Ω-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—É
def get_inline_keyboard() -> InlineKeyboardMarkup:
    keyboard_list = [
        [
            InlineKeyboardButton(text="–ú–µ—Ö–∞–Ω—ñ–∫–∞", callback_data="issue#2"),
            InlineKeyboardButton(text="–ï–ª–µ–∫—Ç—Ä–∏–∫–∞", callback_data="issue#3"),
        ],
        [
            InlineKeyboardButton(text="–°–∫–∞—Å—É–≤–∞—Ç–∏", callback_data="issue#0"),
        ]
    ]
    return InlineKeyboardMarkup(inline_keyboard=keyboard_list)

@router.message(Command("start"))
async def start_command(message: Message):
    user_info = DbConn.get_or_create_user(message.from_user.id, message.from_user.full_name)
    if isinstance(user_info, dict):
        await message.answer(f"üòû –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫... –ü–æ–º–∏–ª–∫–∞: {user_info.get('error')}")
    else:
        await message.answer(f"–ü—Ä–∏–≤—ñ—Ç, {user_info.user_name}, –≤–∞—à–∞ —Ä–æ–ª—å ‚Äî {user_info.user_type}!")

@router.message(Command("issue"))
async def create_issue_command(message: Message):
    await message.answer(
        "–í–∫–∞–∂—ñ—Ç—å —ñ–º–æ–≤—ñ—Ä–Ω—É –ø—Ä–∏—á–∏–Ω—É —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—É",
        reply_markup=get_inline_keyboard()
    )

@router.message(Command("close"))
async def close_issues(message: Message):
    count = DbConn.close_all_issues(message.from_user.id)
    if count == 0:
        await message.answer("–ù–µ–º–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö —ñ–Ω—Ü–∏–¥–µ–Ω—Ç—ñ–≤")
    elif count < 0:
        await message.answer("üòû –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫...")
    else:
        word = "–ø–æ–¥—ñ—é" if count == 1 else "–ø–æ–¥—ñ—ó"
        await message.answer(f"–£—Å–µ –≥–∞—Ä–∞–∑–¥, –∑–∞–∫—Ä–∏—Ç–æ {count} {word}")

@router.callback_query(F.data.regexp("^issue#(\d+)").as_("match_type"))
async def choose_issue_type(call: CallbackQuery, match_type: Match[str]):
    issue_type = int(match_type.group(1))
    # –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –æ–Ω–ª–∞–π–Ω-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É
    await call.message.edit_reply_markup(reply_markup=None)
    if issue_type == 0:
        # –û–ø–µ—Ä–∞—Ü—ñ—è —Å–∫–∞—Å–æ–≤–∞–Ω–∞
        await call.message.answer("–û–ø–µ—Ä–∞—Ü—ñ—é —Å–∫–∞—Å–æ–≤–∞–Ω–æ üí§")
    else:
        # –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π —ñ–Ω—Ü–∏–¥–µ–Ω—Ç
        issue = DbConn.create_issue(call.from_user.id, issue_type)
        if isinstance(issue, dict):
            await call.message.answer(f"üòû –©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫... –ü–æ–º–∏–ª–∫–∞ ‚Äî {issue.get('error')}")
        else:
            await call.message.answer(
                f"‚úî –Ü–Ω—Ü–∏–¥–µ–Ω—Ç –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ, —á–∞—Å: {issue.created}, –ø–æ—Ç—Ä—ñ–±–µ–Ω: "
                f"{issue.user_type}, –≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å: {issue.responsible}. –ó–∞—á–µ–∫–∞–π—Ç–µ."
            )

async def on_startup():
    await bot.set_my_commands(
        [
            BotCommand(command="start", description="–ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –±–æ—Ç–æ–º"),
            BotCommand(command="issue", description="–í—ñ–¥–∫—Ä–∏—Ç–∏ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç"),
            BotCommand(command="close", description="–ó–∞–∫—Ä–∏—Ç–∏ –≤—Å—ñ —ñ–Ω—Ü–∏–¥–µ–Ω—Ç–∏")
        ]
    )
    # –ü–µ—Ä–µ–≤—ñ—Ä–∏–º–æ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é
    is_db_ready = DbConn.test_connection()
    if SERVICE_CHAT_ID:
        status_emoji = "‚úÖ" if is_db_ready else "‚ùå"
        await bot.send_message(
            SERVICE_CHAT_ID,
            f"–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–æ, –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î {status_emoji}"
        )

async def main():
    dp.include_router(router)
    dp.startup.register(on_startup)
    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
```

–î—Ä—É–≥–∏–π —Ñ–∞–π–ª ‚Äî `db.py` (–≤–∑–∞—î–º–æ–¥—ñ—è –∑ –ë–î):

```python
# db.py
import os
import logging

import pyodbc
from pyodbc import Cursor

LOG = logging.getLogger(__name__)

class DbConn:
    _conn_str = None

    @staticmethod
    def connection_string() -> str:
        if not isinstance(DbConn._conn_str, str):
            DbConn._conn_str = (
                "Driver={ODBC Driver 18 for SQL Server};"
                f"Server={os.environ.get('DB_SERVER')};"
                f"Database={os.environ.get('DB_DATABASE')};"
                f"UID={os.environ.get('DB_USER')};"
                f"PWD={os.environ.get('DB_PASSWORD')};"
                "TrustServerCertificate=yes;"
            )
        return DbConn._conn_str

    @staticmethod
    def test_connection() -> bool:
        try:
            with pyodbc.connect(DbConn.connection_string()) as conn:
                cursor = conn.cursor()
                cursor.execute("select @@version")
                records = cursor.fetchall()
                LOG.warning(records[0])
                return len(records) == 1
        except BaseException as e:
            LOG.error(e)
            return False

    @staticmethod
    def get_or_create_user(tg_user_id: int, tg_user_name: str) -> dict:
        try:
            with pyodbc.connect(DbConn.connection_string(), autocommit=True) as conn:
                cursor = conn.cursor()
                cursor.execute("exec bot.get_or_create_user ?, ?", tg_user_id, tg_user_name[:128])
                return cursor.fetchall()[0]
        except BaseException as e:
            LOG.error(e)
            return {"error": e}

    @staticmethod
    def create_issue(tg_user_id: int, issue_type: int) -> dict:
        try:
            with pyodbc.connect(DbConn.connection_string(), autocommit=True) as conn:
                cursor = conn.cursor()
                cursor.execute("exec bot.create_issue ?, ?", tg_user_id, issue_type)
                return cursor.fetchall()[0]
        except BaseException as e:
            LOG.error(e)
            return {"error": e}

    @staticmethod
    def close_all_issues(tg_user_id: int) -> int:
        try:
            with pyodbc.connect(DbConn.connection_string(), autocommit=True) as conn:
                cursor = conn.cursor()
                cursor.execute("exec bot.close_all_issues ?", tg_user_id)
                return cursor.fetchall()[0][0]
        except BaseException as e:
            LOG.error(e)
            return -1
```

–¢–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ñ–∞–π–ª `.env` —ñ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è (–ø—Ä–∏–∫–ª–∞–¥):

```
BOT_TOKEN=455656336:AAHCw22T_qiA391bvLYOcSGMzg-4AADD346
SERVICE_CHAT_ID=436568544
DB_SERVER=localhost
DB_DATABASE=testdb
DB_USER=tgbot
DB_PASSWORD=VeryStrongPassword
```

---

## –ü–∞–∫—É–≤–∞–Ω–Ω—è –≤ Docker Container

–ù–∞—Å–∞–º–ø–µ—Ä–µ–¥ —É –ø—Ä–æ—î–∫—Ç –¥–æ–¥–∞—î–º–æ `Dockerfile`:

```dockerfile
FROM --platform=linux/amd64 public.ecr.aws/docker/library/python:3.10-slim-buster

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1
ENV PYTHONPATH /

RUN apt-get update && apt-get install -y curl gnupg

RUN sh -c "curl https://packages.microsoft.com/keys/microsoft.asc | apt-key add -"
RUN apt-get update
RUN sh -c "curl https://packages.microsoft.com/config/ubuntu/20.04/prod.list > /etc/apt/sources.list.d/mssql-release.list"
RUN apt-get update
RUN ACCEPT_EULA=Y apt-get install -y msodbcsql18
RUN apt-get install -y netcat gcc unixodbc-dev

COPY . /app
WORKDIR /app

RUN pip install --upgrade pip
RUN pip3 install -r requirements.txt

ENTRYPOINT ["python3", "run.py"]
```

–î–µ–∫—ñ–ª—å–∫–∞ –ø–æ—è—Å–Ω–µ–Ω—å:

- –Ø–∫ –±–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `public.ecr.aws/docker/library/python:3.10-slim-buster`, –æ—Å–∫—ñ–ª—å–∫–∏ –∑ –Ω–∏–º –≤–¥–∞–ª–æ—Å—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `pyodbc` –¥–ª—è MS SQL.
- –†—è–¥–∫–∏ 7‚Äì14 —É–∑—è—Ç–æ –∑ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ Microsoft —â–æ–¥–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `pyodbc`.
- –†–µ—à—Ç–∞ –∫—Ä–æ–∫—ñ–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ: –∫–æ–ø—ñ—é—î–º–æ –≤–º—ñ—Å—Ç –ø—Ä–æ—î–∫—Ç—É —É `/app` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∞ –æ–≥–æ–ª–æ—à—É—î–º–æ `run.py` —Ñ–∞–π–ª–æ–º, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É.

–¢–∞–∫–æ–∂ —Å—Ç–≤–æ—Ä–∏–º–æ `requirements.txt`, —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```
aiofiles==24.1.0
aiogram==3.17.0
aiohappyeyeballs==2.4.4
aiohttp==3.11.11
aiosignal==1.3.2
annotated-types==0.7.0
attrs==25.1.0
certifi==2025.1.31
frozenlist==1.5.0
idna==3.10
magic-filter==1.0.12
multidict==6.1.0
propcache==0.2.1
pydantic==2.10.6
pydantic_core==2.27.2
pyodbc==5.2.0
python-dotenv==1.0.1
typing_extensions==4.12.2
yarl==1.18.3
```

–ù–∞—Ä–µ—à—Ç—ñ, –∑–±–∏—Ä–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –Ø–∫—â–æ –º–∏ –µ–º—É–ª—é—î–º–æ MS SQL –ª–æ–∫–∞–ª—å–Ω–æ, –≤–∞—Ä—Ç–æ –≤ `.env` –¥–ª—è `DB_SERVER` –∑–∞–º—ñ–Ω–∏—Ç–∏ `localhost` –Ω–∞ `host.docker.internal`. –Ø–∫—â–æ –∂ —É –≤–∞—Å —Ä–µ–∞–ª—å–Ω–∏–π –æ–∫—Ä–µ–º–∏–π —Å–µ—Ä–≤–µ—Ä (—â–æ –Ω–∞–π—á–∞—Å—Ç—ñ—à–µ —ñ –±—É–≤–∞—î –Ω–∞ –ø—Ä–∞–∫—Ç–∏—Ü—ñ), –Ω—ñ—á–æ–≥–æ –º—ñ–Ω—è—Ç–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

```bash
# –ó–±–∏—Ä–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker build -t tgbot .

# –Ü –∑–∞–ø—É—Å–∫–∞—î–º–æ –π–æ–≥–æ
docker run --rm -d tgbot
```

–ü–æ—Ç—ñ–º –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –≤—Å–µ –ø—Ä–∞—Ü—é—î —è–∫ –Ω–∞–ª–µ–∂–∏—Ç—å, –≤–∏–∫–æ–Ω–∞–≤—à–∏ –∫–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/852/35f/93f/85235f93f736826be6fb3916fdba8c81.png)

---

## –í–∏—Å–Ω–æ–≤–∫–∏

–ú–∏ —Ä–æ–∑–≥–ª—è–Ω—É–ª–∏ –ø—Ä–∏–∫–ª–∞–¥, –¥–µ –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç —Å–ª—É–≥—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –º—ñ–∂ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –±–µ–∑ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ—ó –º–µ—Ä–µ–∂—ñ —Ç–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (MS SQL). –¢–∞–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–∞—î –∑–º–æ–≥—É —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –π —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –±–æ—Ç—ñ–≤ (—É docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö), –ø—ñ–¥–≤–∏—â—É—é—á–∏ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —Ç–∞ –∫–µ—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å —Å–∏—Å—Ç–µ–º–∏.
